// SKYFIRE Competition Internationalization (i18n)

// Language translations
const translations = {
    en: {
        // Navigation
        'nav.home': 'Home',
        'nav.registration': 'Registration',
        'nav.evaluation': 'Evaluation',
        'nav.patterns': 'Patterns',
        'nav.promote': 'Promote',
        'nav.laser-kits': 'Laser Kits',
        
        // Main Content
        'hero.title': 'SKYFIRE DIY Fiber Laser Cutter Competition 2024-2025',
        'hero.subtitle': '🏆 Join the Global Maker Community - Showcase Your DIY Fiber Laser Cutting Skills',
        'hero.description': '🌍 International Competition with $5,800 Prize Pool - Registration Deadline Sep 30, 2025',
        'hero.register-btn': 'Register Now',
        'hero.learn-more': 'Learn More',
        
        // Statistics
        'stats.participants': 'Participants Registered',
        'stats.refresh': 'Refresh',
        'stats.prize-pool': 'Total Prize Pool: $5,800 Gift Vouchers',
        
        // Timeline
        'timeline.title': 'Competition Timeline',
        'timeline.registration': 'Registration',
        'timeline.evaluation': 'Evaluation',
        'timeline.results': 'Results',
        'timeline.reg-deadline': 'Sep 30, 2025',
        'timeline.eval-start': 'Nov 30, 2025', 
        'timeline.results-date': 'Dec 15, 2025',
        
        // Form
        'form.name': 'Full Name',
        'form.email': 'Email Address',
        'form.country': 'Country/Region',
        'form.phone': 'Phone Number (Optional)',
        'form.company': 'Company/Organization',
        'form.participation': 'Participation Type',
        'form.individual': 'Individual',
        'form.team': 'Team',
        'form.power-level': 'Laser Power Level',
        'form.source': 'How did you hear about us?',
        'form.agree': 'I agree to the competition terms',
        'form.submit': 'Register Now',
        
        // Form placeholders
        'form.placeholder.name': 'Enter your full name',
        'form.placeholder.email': 'example@email.com',
        'form.placeholder.country': 'Enter your country/region',
        'form.placeholder.phone': '+1 555-0000',
        'form.placeholder.company': 'Leave blank for individual participation',
        'form.placeholder.team-members': 'List team member names, one per line',
        
        // Form options
        'form.option.select-participation': 'Select Participation Type',
        'form.option.individual': 'Individual Participation',
        'form.option.team': 'Team Participation',
        'form.option.select-power': 'Select Power Level',
        'form.option.1kw-1.5kw': '1kW - 1.5kW',
        'form.option.3kw': '3kW',
        'form.option.6kw': '6kW',
        'form.option.12kw': '12kW',
        'form.option.above-12kw': 'Above 12kW',
        'form.option.please-select': 'Please select',
        'form.option.social-media': 'Social Media',
        'form.option.friend-referral': 'Friend Referral',
        'form.option.tech-forum': 'Tech Forum',
        'form.option.maker-community': 'Maker Community',
        'form.option.search-engine': 'Search Engine',
        'form.option.other': 'Other',
        
        // Additional elements
        'hero.register-btn': 'Register Now',
        'prize.1st': '1st Place',
        'prize.2nd': '2nd Place', 
        'prize.3rd': '3rd Place',
        'timeline.reg-start': 'Registration Start Date',
        'timeline.reg-deadline': 'Registration Deadline',
        'timeline.eval-start': 'Evaluation Start Date',
        'timeline.eval-end': 'Evaluation End Date',
        
        // Additional timeline elements
        'timeline.registration': 'Registration Period',
        'timeline.evaluation': 'Evaluation Period',
        'timeline.results': 'Results Announcement',
        'timeline.results-date': 'Results Date',
        
        // Messages
        'msg.loading': 'Loading...',
        'msg.success': 'Registration successful!',
        'msg.error': 'An error occurred',
        'msg.copied': 'Copied to clipboard!',
        'msg.draft-restored': 'Draft restored',
        
        // Footer
        'footer.contact': 'Contact',
        'footer.copyright': '© 2025 SKYFIRE DIY Fiber Laser Cutter Competition. All rights reserved.',
        'footer.tagline': 'Designed for makers, by makers. Join the innovation revolution.'
    },
    
    es: {
        // Navigation
        'nav.home': 'Inicio',
        'nav.registration': 'Registro',
        'nav.evaluation': 'Evaluación',
        'nav.patterns': 'Patrones',
        'nav.promote': 'Promocionar',
        'nav.laser-kits': 'Kits Láser',
        
        // Main Content
        'hero.title': 'Competencia SKYFIRE DIY de Cortadoras Láser de Fibra 2024-2025',
        'hero.subtitle': '🏆 Únete a la Comunidad Global de Makers - Muestra tus Habilidades DIY de Corte Láser de Fibra',
        'hero.description': '🌍 Competencia Internacional con $5,800 de Premio - Fecha límite de registro: 30 Sep, 2025',
        'hero.register-btn': 'Registrarse Ahora',
        'hero.learn-more': 'Saber Más',
        
        // Statistics
        'stats.participants': 'Participantes Registrados',
        'stats.refresh': 'Actualizar',
        'stats.prize-pool': 'Premio Total: $5,800 en Vales de Regalo',
        
        // Timeline
        'timeline.title': 'Cronología de la Competencia',
        'timeline.registration': 'Registro',
        'timeline.evaluation': 'Evaluación',
        'timeline.results': 'Resultados',
        'timeline.reg-deadline': '30 Sep, 2025',
        'timeline.eval-start': '30 Nov, 2025',
        'timeline.results-date': '15 Dic, 2025',
        
        // Form
        'form.name': 'Nombre Completo',
        'form.email': 'Dirección de Email',
        'form.country': 'País/Región',
        'form.phone': 'Número de Teléfono (Opcional)',
        'form.company': 'Empresa/Organización',
        'form.participation': 'Tipo de Participación',
        'form.individual': 'Individual',
        'form.team': 'Equipo',
        'form.power-level': 'Nivel de Potencia del Láser',
        'form.source': '¿Cómo se enteró de nosotros?',
        'form.agree': 'Acepto los términos de la competencia',
        'form.submit': 'Registrarse Ahora',
        
        // Form placeholders
        'form.placeholder.name': 'Ingrese su nombre completo',
        'form.placeholder.email': 'ejemplo@email.com',
        'form.placeholder.country': 'Ingrese su país/región',
        'form.placeholder.phone': '+1 555-0000',
        'form.placeholder.company': 'Dejar en blanco para participación individual',
        'form.placeholder.team-members': 'Lista de nombres de miembros del equipo, uno por línea',
        
        // Form options
        'form.option.select-participation': 'Seleccionar Tipo de Participación',
        'form.option.individual': 'Participación Individual',
        'form.option.team': 'Participación en Equipo',
        'form.option.select-power': 'Seleccionar Nivel de Potencia',
        'form.option.1kw-1.5kw': '1kW - 1.5kW',
        'form.option.3kw': '3kW',
        'form.option.6kw': '6kW',
        'form.option.12kw': '12kW',
        'form.option.above-12kw': 'Más de 12kW',
        'form.option.please-select': 'Por favor seleccione',
        'form.option.social-media': 'Redes Sociales',
        'form.option.friend-referral': 'Referencia de Amigo',
        'form.option.tech-forum': 'Foro Tecnológico',
        'form.option.maker-community': 'Comunidad Maker',
        'form.option.search-engine': 'Motor de Búsqueda',
        'form.option.other': 'Otro',
        
        // Additional elements
        'hero.register-btn': 'Registrarse Ahora',
        'prize.1st': '1er Lugar',
        'prize.2nd': '2do Lugar',
        'prize.3rd': '3er Lugar',
        'timeline.reg-start': 'Fecha de Inicio de Registro',
        'timeline.reg-deadline': 'Fecha Límite de Registro',
        'timeline.eval-start': 'Fecha de Inicio de Evaluación',
        'timeline.eval-end': 'Fecha Final de Evaluación',
        
        // Additional timeline elements
        'timeline.registration': 'Período de Registro',
        'timeline.evaluation': 'Período de Evaluación',
        'timeline.results': 'Anuncio de Resultados',
        'timeline.results-date': 'Fecha de Resultados',
        
        // Messages
        'msg.loading': 'Cargando...',
        'msg.success': '¡Registro exitoso!',
        'msg.error': 'Ocurrió un error',
        'msg.copied': '¡Copiado al portapapeles!',
        'msg.draft-restored': 'Borrador restaurado',
        
        // Footer
        'footer.contact': 'Contacto',
        'footer.copyright': '© 2025 Competencia SKYFIRE DIY de Cortadoras Láser de Fibra. Todos los derechos reservados.',
        'footer.tagline': 'Diseñado para makers, por makers. Únete a la revolución de la innovación.'
    },
    
    ja: {
        // Navigation
        'nav.home': 'ホーム',
        'nav.registration': '登録',
        'nav.evaluation': '評価',
        'nav.patterns': 'パターン',
        'nav.promote': '宣伝',
        'nav.laser-kits': 'レーザーキット',
        
        // Main Content
        'hero.title': 'SKYFIRE DIYファイバーレーザーカッター競技会 2024-2025',
        'hero.subtitle': '🏆 グローバルメーカーコミュニティに参加 - DIYファイバーレーザーカッティングスキルを披露',
        'hero.description': '🌍 $5,800賞金プールの国際競技会 - 登録締切：2025年9月30日',
        'hero.register-btn': '今すぐ登録',
        'hero.learn-more': '詳細を見る',
        
        // Statistics
        'stats.participants': '登録参加者',
        'stats.refresh': '更新',
        'stats.prize-pool': '総賞金プール：$5,800ギフト券',
        
        // Timeline
        'timeline.title': '競技会スケジュール',
        'timeline.registration': '登録',
        'timeline.evaluation': '評価',
        'timeline.results': '結果',
        'timeline.reg-deadline': '2025年9月30日',
        'timeline.eval-start': '2025年11月30日',
        'timeline.results-date': '2025年12月15日',
        
        // Form
        'form.name': '氏名',
        'form.email': 'メールアドレス',
        'form.country': '国/地域',
        'form.phone': '電話番号（任意）',
        'form.company': '会社/組織',
        'form.participation': '参加タイプ',
        'form.individual': '個人',
        'form.team': 'チーム',
        'form.power-level': 'レーザー出力レベル',
        'form.source': 'どこで知りましたか？',
        'form.agree': '競技会の規約に同意します',
        'form.submit': '今すぐ登録',
        
        // Form placeholders
        'form.placeholder.name': 'フルネームを入力してください',
        'form.placeholder.email': 'example@email.com',
        'form.placeholder.country': '国/地域を入力してください',
        'form.placeholder.phone': '+81 90-0000-0000',
        'form.placeholder.company': '個人参加の場合は空白のままにしてください',
        'form.placeholder.team-members': 'チームメンバーの名前を1行に1人ずつ入力',
        
        // Form options
        'form.option.select-participation': '参加タイプを選択',
        'form.option.individual': '個人参加',
        'form.option.team': 'チーム参加',
        'form.option.select-power': '出力レベルを選択',
        'form.option.1kw-1.5kw': '1kW - 1.5kW',
        'form.option.3kw': '3kW',
        'form.option.6kw': '6kW',
        'form.option.12kw': '12kW',
        'form.option.above-12kw': '12kW以上',
        'form.option.please-select': '選択してください',
        'form.option.social-media': 'ソーシャルメディア',
        'form.option.friend-referral': '友人の紹介',
        'form.option.tech-forum': '技術フォーラム',
        'form.option.maker-community': 'メーカーコミュニティ',
        'form.option.search-engine': '検索エンジン',
        'form.option.other': 'その他',
        
        // Additional elements
        'hero.register-btn': '今すぐ登録',
        'prize.1st': '1位',
        'prize.2nd': '2位',
        'prize.3rd': '3位',
        'timeline.reg-start': '登録開始日',
        'timeline.reg-deadline': '登録締切日',
        'timeline.eval-start': '評価開始日',
        'timeline.eval-end': '評価終了日',
        
        // Additional timeline elements
        'timeline.registration': '登録期間',
        'timeline.evaluation': '評価期間',
        'timeline.results': '結果発表',
        'timeline.results-date': '結果発表日',
        
        // Messages
        'msg.loading': '読み込み中...',
        'msg.success': '登録成功！',
        'msg.error': 'エラーが発生しました',
        'msg.copied': 'クリップボードにコピーしました！',
        'msg.draft-restored': '下書きが復元されました',
        
        // Footer
        'footer.contact': 'お問い合わせ',
        'footer.copyright': '© 2025 SKYFIRE DIYファイバーレーザーカッター競技会。すべての権利を保有しています。',
        'footer.tagline': 'メーカーのため、メーカーによるデザイン。イノベーション革命に参加しよう。'
    },
    
    de: {
        // Navigation
        'nav.home': 'Startseite',
        'nav.registration': 'Anmeldung',
        'nav.evaluation': 'Bewertung',
        'nav.patterns': 'Muster',
        'nav.promote': 'Bewerben',
        'nav.laser-kits': 'Laser-Kits',
        
        // Main Content
        'hero.title': 'SKYFIRE DIY Faserlaser-Schneider Wettbewerb 2024-2025',
        'hero.subtitle': '🏆 Tritt der globalen Maker-Community bei - Zeige deine DIY Faserlaser-Schneidefähigkeiten',
        'hero.description': '🌍 Internationaler Wettbewerb mit $5.800 Preispool - Anmeldeschluss: 30. Sep 2025',
        'hero.register-btn': 'Jetzt Anmelden',
        'hero.learn-more': 'Mehr Erfahren',
        
        // Statistics
        'stats.participants': 'Registrierte Teilnehmer',
        'stats.refresh': 'Aktualisieren',
        'stats.prize-pool': 'Gesamtpreis: $5.800 Geschenkgutscheine',
        
        // Timeline
        'timeline.title': 'Wettbewerb Zeitplan',
        'timeline.registration': 'Anmeldung',
        'timeline.evaluation': 'Bewertung',
        'timeline.results': 'Ergebnisse',
        'timeline.reg-deadline': '30. Sep 2025',
        'timeline.eval-start': '30. Nov 2025',
        'timeline.results-date': '15. Dez 2025',
        
        // Form
        'form.name': 'Vollständiger Name',
        'form.email': 'E-Mail-Adresse',
        'form.country': 'Land/Region',
        'form.phone': 'Telefonnummer (Optional)',
        'form.company': 'Firma/Organisation',
        'form.participation': 'Teilnahmeart',
        'form.individual': 'Einzelperson',
        'form.team': 'Team',
        'form.power-level': 'Laser-Leistungsstufe',
        'form.source': 'Wie haben Sie von uns erfahren?',
        'form.agree': 'Ich stimme den Wettbewerbsbedingungen zu',
        'form.submit': 'Jetzt Anmelden',
        
        // Form placeholders
        'form.placeholder.name': 'Geben Sie Ihren vollständigen Namen ein',
        'form.placeholder.email': 'beispiel@email.com',
        'form.placeholder.country': 'Geben Sie Ihr Land/Region ein',
        'form.placeholder.phone': '+49 030 12345678',
        'form.placeholder.company': 'Leer lassen für Einzelteilnahme',
        'form.placeholder.team-members': 'Namen der Teammitglieder auflisten, einen pro Zeile',
        
        // Form options
        'form.option.select-participation': 'Teilnahmeart wählen',
        'form.option.individual': 'Einzelteilnahme',
        'form.option.team': 'Teamteilnahme',
        'form.option.select-power': 'Leistungsstufe wählen',
        'form.option.1kw-1.5kw': '1kW - 1.5kW',
        'form.option.3kw': '3kW',
        'form.option.6kw': '6kW',
        'form.option.12kw': '12kW',
        'form.option.above-12kw': 'Über 12kW',
        'form.option.please-select': 'Bitte auswählen',
        'form.option.social-media': 'Soziale Medien',
        'form.option.friend-referral': 'Freundesempfehlung',
        'form.option.tech-forum': 'Technik-Forum',
        'form.option.maker-community': 'Maker-Community',
        'form.option.search-engine': 'Suchmaschine',
        'form.option.other': 'Andere',
        
        // Additional elements
        'hero.register-btn': 'Jetzt Anmelden',
        'prize.1st': '1. Platz',
        'prize.2nd': '2. Platz',
        'prize.3rd': '3. Platz',
        'timeline.reg-start': 'Anmeldung Startdatum',
        'timeline.reg-deadline': 'Anmeldeschluss',
        'timeline.eval-start': 'Bewertung Startdatum',
        'timeline.eval-end': 'Bewertung Enddatum',
        
        // Additional timeline elements
        'timeline.registration': 'Anmeldungszeitraum',
        'timeline.evaluation': 'Bewertungszeitraum',
        'timeline.results': 'Ergebnisbekanntgabe',
        'timeline.results-date': 'Ergebnisdatum',
        
        // Messages
        'msg.loading': 'Wird geladen...',
        'msg.success': 'Anmeldung erfolgreich!',
        'msg.error': 'Ein Fehler ist aufgetreten',
        'msg.copied': 'In die Zwischenablage kopiert!',
        'msg.draft-restored': 'Entwurf wiederhergestellt',
        
        // Footer
        'footer.contact': 'Kontakt',
        'footer.copyright': '© 2025 SKYFIRE DIY Faserlaser-Schneider Wettbewerb. Alle Rechte vorbehalten.',
        'footer.tagline': 'Entworfen für Maker, von Makern. Tritt der Innovations-Revolution bei.'
    }
};

// Current language
let currentLanguage = localStorage.getItem('skyfire-language') || 'en';

// Get translation
function t(key) {
    return translations[currentLanguage]?.[key] || translations.en[key] || key;
}

// Set language
function setLanguage(lang) {
    if (translations[lang]) {
        currentLanguage = lang;
        localStorage.setItem('skyfire-language', lang);
        updatePageText();
        updateLanguageSelector();
        
        // Trigger custom event for other scripts
        window.dispatchEvent(new CustomEvent('languageChanged', { detail: { language: lang } }));
    }
}

// Update all text on page
function updatePageText() {
    // Update regular text elements
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        const translation = t(key);
        
        if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
            if (element.type === 'submit' || element.type === 'button') {
                element.value = translation;
            } else {
                element.placeholder = translation;
            }
        } else {
            element.textContent = translation;
        }
    });
    
    // Update placeholder attributes
    document.querySelectorAll('[data-i18n-placeholder]').forEach(element => {
        const key = element.getAttribute('data-i18n-placeholder');
        const translation = t(key);
        element.placeholder = translation;
    });
    
    // Update document title
    const titleKey = document.querySelector('[data-i18n-title]')?.getAttribute('data-i18n-title');
    if (titleKey) {
        document.title = t(titleKey);
    }
}

// Update language selector
function updateLanguageSelector() {
    document.querySelectorAll('.language-selector select').forEach(select => {
        select.value = currentLanguage;
    });
    
    document.querySelectorAll('.language-selector button').forEach(button => {
        const lang = button.getAttribute('data-lang');
        button.classList.toggle('active', lang === currentLanguage);
    });
}

// Create language selector
function createLanguageSelector() {
    const selector = document.createElement('div');
    selector.className = 'language-selector flex items-center gap-2';
    selector.innerHTML = `
        <div class="relative">
            <select onchange="setLanguage(this.value)" class="border border-gray-300 rounded px-3 py-2 text-sm bg-white focus:outline-none focus:ring-2 focus:ring-orange-500">
                <option value="en">🇺🇸 English</option>
                <option value="es">🇪🇸 Español</option>
                <option value="ja">🇯🇵 日本語</option>
                <option value="de">🇩🇪 Deutsch</option>
            </select>
        </div>
    `;
    
    return selector;
}

// Add language selector to navigation
function addLanguageSelectorToNav() {
    const nav = document.querySelector('nav .hidden.lg\\:flex');
    if (nav && !nav.querySelector('.language-selector')) {
        const selector = createLanguageSelector();
        nav.appendChild(selector);
        updateLanguageSelector();
    }
}

// Auto-detect language from browser
function detectLanguage() {
    const browserLang = navigator.language || navigator.userLanguage;
    const langCode = browserLang.split('-')[0];
    
    // Supported languages: en, es, ja, de
    const supportedLanguages = ['en', 'es', 'ja', 'de'];
    
    if (supportedLanguages.includes(langCode) && !localStorage.getItem('skyfire-language')) {
        setLanguage(langCode);
    } else if (!localStorage.getItem('skyfire-language')) {
        // Default to English if browser language not supported
        setLanguage('en');
    }
}

// Initialize i18n
function initI18n() {
    detectLanguage();
    updatePageText();
    addLanguageSelectorToNav();
    
    // Add to window for global access
    window.t = t;
    window.setLanguage = setLanguage;
}

// Initialize when DOM is ready
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initI18n);
} else {
    initI18n();
} 